{% extends "layout.html" %}

{% block title %}{{ name }} - DXR{% endblock %}

{% set state_eof = True %}

{% block content %}
<div id="content" class="content" data-no-results="No results returned for current query.">
  <div class="file-name">
    {%- for path, name in paths_and_names -%}
      {% if not loop.first or loop.last %}<span class="path-separator">/</span><a href="{{ wwwroot }}{{ path }}">{{ name }}</a>{% else %}<a href="{{ wwwroot }}{{ path }}">{{ name }}</a>{% endif %}
    {%- endfor -%}
  </div>

  {% set showing_tree_menu = trees|length > 1 %}
  {% if showing_tree_menu %}
    <section id="tree-selector" class="tree-selector">
      <select name="tree" id="tree">
        {% for t in trees %}
          <option{% if ((t == tree) if tree else loop.first)  %} selected="selected"{% endif %}>{{ t }}</option>
        {% endfor %}
      </select>
    </section>
  {% else %}
    <section id="tree-selector" class="tree-selector">
      <select name="tree" id="tree" disabled="disabled">
        <option value="{{ tree }}">{{ tree }}</option>
      </select>
    </section>
  {% endif %}

  <table class="folder-content">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Modified</th>
        <th scope="col">Size</th>
      </tr>
    </thead>
    <tbody>
      {% for icon, name, modified, relative_url in folders %}
      <tr>
        <td><a href="{{ wwwroot }}/{{ relative_url }}" class="folder-icon">{{ name }}/</a></td>
        <td>{{ modified.strftime("%Y-%b-%d %H:%m") }}</td>
        <td>-</td>
      </tr>
      {% endfor %}

      {% for icon, name, modified, size, relative_url in files %}
      <tr>
        <td><a href="{{ wwwroot }}/{{ relative_url }}"
               style="background-image: url('{{ wwwroot }}/static/icons/{{ icon }}.png')"
               class="icon">
               {{ name }}</a></td>
        <td>{{ modified.strftime("%Y-%b-%d %H:%m") }}</td>
        <td>{{ size|filesizeformat }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

