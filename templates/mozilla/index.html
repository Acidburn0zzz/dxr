{% from "macros.html" import search_box %}
{% extends "layout.html" %}

{% set state_eof = True %}

{% block head %}
  <script>
      window.addEventListener('load', function() {
          var query = document.getElementById('query');
          // Hide splash page, and display results:
          query.addEventListener('input', function showResults(e) {
              var searchBox = document.getElementById('search-box'),
                  tree = document.getElementById('tree'),
                  treeTip = document.getElementById('tree-tip');

              // Do most of the visual changes just by twiddling this one class:
              searchBox.classList.add('with-results');

              // Splice the tree menu into a new position. I don't see another
              // way to keep it in the flow of the text without making horrid
              // assertions about text size:
              treeTip.appendChild(tree);

              query.removeEventListener('input', showResults, false);
          }, false);
      }, false);
  </script>
{% endblock %}

{% block top_search %}{% endblock %}

{% block content %}
  {{ search_box(trees, tree, query, at_top=False) }}
  <div id="results"></div>
{% endblock %}

{# We want an empty footer #}
{% block foot %}
{% endblock %}
